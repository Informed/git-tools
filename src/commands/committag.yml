description: >-
  Tag the current commit with automatic semver incrementing. You will need a
  user key to push a tag back up to your VCS provider
parameters:
  custom_tag:
    default: customtag
    description: >-
      Input a simple custom tag to push for this commit. Example:
      'myTag-${CIRCLE_SHA1}'
    type: string
  increment_major:
    default: false
    description: >-
      If increment_tag is enabled and this is true, the major version will be
      incremented.
    type: boolean
  increment_minor:
    default: false
    description: >-
      If increment_tag is enabled and this is true, the minor version will be
      incremented.
    type: boolean
  increment_patch:
    default: false
    description: >-
      If increment_tag is enabled and this is true, the patch version will be
      incremented.
    type: boolean
  increment_tag:
    default: false
    description: >-
      WILL OVERRIDE CUSTOM_TAG: This option will fetch the latest tag in the
      repo and attempt to automatically copy it and increment the semver leaving
      and prefix or suffix untouched. By default if set to true, a patch level
      increment will be made.
    type: boolean
  tag_pattern:
    default: '*'
    description: >-
      By default the latest tag will be used. Use this option to match specifc
      tag matterns, ex: 'alpha-*'
    type: string
steps:
  - checkout
  - run:
      command: <<include(scripts/committag.sh)>>
      name: Create and publish tagged commit
